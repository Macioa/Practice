<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Page Title</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" media="screen" href="style.css" />
</head>
<body>

<div class="mainmenu">
    <input type="text" class="newTomaButton" id="tomaName"><button class="newTomaButton" onclick="makeToma()">Create</button>
</div>


</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
<script src="Emotion.js"></script>
<script src="Menu.js"></script>
<script src="Character.js"></script>


<script>
    var tomasArray = [];
    // Run the tick function on all created tomagotchis. Dead tomagotchis will ignore
    const tickTomas = (tomas) => {
    for (let toma of tomas){
        toma.tick();
        }
    }

    // Make a new tomagotchi with the name entered in input field
    const makeToma = () => {
        let input = document.getElementById('tomaName');
        let name = input.value;
        let toma = null;
        if (name.length){
            if (Math.floor(Math.random()*2))
                toma = new Tomagotchi(name, "img/head1.png", tomasArray.length+1);
            else toma = new Tomagotchi(name,"img/head2.png", tomasArray.length+1);
            input.value='';
            tomasArray.push(toma)
        } else alert("Enter a name for your new Tomagotchi.");
    }

    // Make a new tomagotchi if enter key is pressed
    const enterKey = (event) => {
        if(event.key === 'Enter') 
            makeToma();       
    }

    // Add keypress event listener to input text field
    document.getElementById('tomaName').addEventListener('keyup', enterKey);

    // Global tick function for all tomagotchis
    const ticker = setInterval( function(){tickTomas(tomasArray)},1000 );

</script>

</html>
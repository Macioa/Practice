cloudflare.com/apps

applicable to all devices that use branch prediction, speculation, and large caches. including smart phones

branch prediction and speculation - cpu predicts branches of code, speculation starts processing before 
intel is secretive about details in branch prediction
in misprediction, it halts the processing, returns to earlier state(except processor cache), and starts a new path
spectre works by loading block of memory from cache during branch misprediction

compiled js->

if (index < simpleByeArray.length) {
	index = simpleByteArray[index | 0];
	index = ((index * TABLE!_STRIDE) | 0) & (TABLE1_BYTES-1))|0;
	localJunk ^= probeTable[Index|0]|0;
}

l1 branch results in misprediction. an outer loop trains the branch to predict this to be true;
l2 during misprediction, fetches block of memory;
l3 compute an offset based on 256 possible values; finding 'secret value';
l4 uses 'secret value' index to access value in 1 mb array (requires high-resolution timer) 'secret value' returns faster because its stored in l2 cache, divide value by 4096

train branch predictor
flush cache
execute gadget (above)
extract value using timings
repeat 


can extract authorization, cookies, or other information from other browsers running in the same process.




jit compilation, js compiled to machine code - similar to other languages
js compiler returns undefined value that would crash (sigsev) other (C) applications

---
fixes applied to browsers
disabled speculative execution in bound checks for arrays
browser copies less private data into rendering process

----------------
best practices for web development
careful with iframes, ads, other gadgets rendered in the same process as your site
MFA passwords, good-hygene passwords


cloudfare.com/careers/
